"use strict";var manifest=chrome.runtime.getManifest(),Ga=new InfinityGa({trackingId:"UA-130509779-1"});document.title=feedbackI18n.get("feedback_suggestion")+" - "+manifest.name;var submit=document.getElementById("submit"),text=document.getElementById("text"),loading=document.querySelector(".loading-out"),spinner=document.querySelector(".spinner");function splitter(e,t){for(var n=[];e.length>t;){var i=e.substring(0,t).lastIndexOf(" ");i=i<=0?t:i,n.push(e.substring(0,i));var a=e.indexOf(" ",i)+1;(a<i||i+t<a)&&(a=i),e=e.substring(a)}return n.push(e),n}function feedbackDone(){alert(feedbackI18n.get("feedback_success")),window.close()}submit.addEventListener("click",function(){var e=text.value;if(""!=e.replace(/\s/g,"")){loading.style.display="flex";for(var t=splitter(e,100),n=[],i=0;i<t.length;i++){var a={t:"f",i:i,x:t[i]};n.push(a)}var s={t:"i",i:0,l:manifest.current_locale,v:manifest.version,is:!!manifest.hasOwnProperty("update_url"),s:{w:window.screen.width,h:window.screen.height,d:window.devicePixelRatio},u:window.navigator.userAgent};n.push(s);var r=" - ["+Date.now()+"]",o=0;for(i=0;i<n.length;i++){var c=JSON.stringify(n[i]);Ga.event({category:e.substr(0,100)+r,action:DISPLAY_NAME.substr(0,37),label:c},function(){(o+=1)==n.length&&feedbackDone()},function(){(o+=1)==n.length&&feedbackDone()})}}else alert(feedbackI18n.get("please_input_feedback_first"))});