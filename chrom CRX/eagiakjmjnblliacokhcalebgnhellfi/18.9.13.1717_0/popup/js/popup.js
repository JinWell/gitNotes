"use strict";Vue.filter("i18n",function(e){return infinity.i18n(e)}),infinity.sendMessage("popup","popup",function(e){});var browser="FireFox"==infinity.browser,cleanData={data:{clean_item:infinity.get("clean-master").clean_item,clean_time:infinity.get("clean-master").clean_time,clean_tabs:infinity.get("clean-master").clean_tabs},get:function(e){return this.data[e]},set:function(){infinity.set("clean-master",this.data)},setting:function(e,t){this.data[e]=t}},vm=new Vue({el:"#app",template:"#J-app-template",data:{browser:browser,begintime:0,endClean:!1,cleaning:!1,cleanText:"cleani",taggle:!1,cleanOnclick:!0,cleanTime:cleanData.get("clean_time"),cleanTimeContent:"lastHour",cleanContent:cleanData.get("clean_item"),startClean:!1,startClean1:!0},created:function(){"Last Hour"==this.cleanTime?this.cleanTimeContent="lastHour":"Last Day"==this.cleanTime?this.cleanTimeContent="lastDay":"Last Week"==this.cleanTime?this.cleanTimeContent="lastWeek":"Last Month"==this.cleanTime?this.cleanTimeContent="lastMonth":"Everything"==this.cleanTime&&(this.cleanTimeContent="Everything")},mounted:function(){var e=infinity.get("open_auto");"boolean"!=typeof e&&(infinity.set("open_auto",!1),e=!1),e&&this.oneClean()},methods:{cleaningdoing:function(){var i=this;setTimeout(function(){i.startClean1=!1,i.startClean=!1,i.cleanOnclick=!1,i.cleaning=!0;var n=(new Date).getTime();i.cleanText="cleaningup";var e=getCleanTime(i.cleanTime),t=getCleanItemContent(i.cleanContent),a=(new Date).getTime()-e;chrome.browsingData.remove({since:a},t,function(){var e=(new Date).getTime(),t=313-parseInt(e-n)%313;setTimeout(function(){i.cleaning=!1,i.endClean=!0},t)})},250)},oneClean:function(){var a=this;if(this.cleanOnclick)if(infinity.sendMessage("clean","clean",function(e){}),this.startClean=!0,cleanData.get("clean_tabs")||cleanData.setting("clean_tabs",{tabs:!1,fixed:!1}),cleanData.get("clean_tabs").tabs){var e={active:!1,currentWindow:!0};cleanData.get("clean_tabs").fixed||(e.pinned=!1),chrome.tabs.query(e,function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].id);chrome.tabs.remove(t,function(){a.cleaningdoing()})})}else this.cleaningdoing()},handletaggle:function(){this.taggle=!this.taggle},bodyClick:function(){},cancelTime:function(){this.taggle=!1},changeTaggle:function(){this.taggle=!1},selectTime:function(e){this.taggle=!1,this.cleanTimeContent=e.target.innerHTML,this.cleanTime=e.target.dataset.index,cleanData.setting("clean_time",this.cleanTime),cleanData.set(),this.cleanOnclick||(this.cleanOnclick=!0,this.endClean=!1,this.cleaning=!1,this.cleanText="cleani",this.startClean1=!0)},gotoSetting:function(){window.open("/option/option.html","option")}}});function getCleanTime(e){var t;return"Last Hour"==e?t=36e5:"Last Day"==e?t=864e5:"Last Week"==e?t=6048e5:"Last Month"==e?t=2592e6:"Everything"==e&&(t=(new Date).getTime()),t}function getCleanItemContent(e){for(var t={},n=0;n<e.length;n++)t[e[n].name]=e[n].isClean;return t}