var site="http://www.wordmemo.com";
dojo.ready(function(){var b=window.location.hash.substring(1);dojo.xhrGet({url:"http://fanyi.youdao.com/openapi.do?keyfrom=Wordmemo&key=93760356&type=data&doctype=json&version=1.1&q="+b,handleAs:"json",timeout:15E3,load:function(a){var b=dojo.byId("dictWord");b.innerHTML="";var c=dojo.byId("dictDef");c.innerHTML="";dojo.byId("dictExa").innerHTML="";0==a.errorCode?a.basic?(dojo.create("span",{innerHTML:a.query,"class":"dictTitle"},b),a.basic.phonetic&&dojo.create("span",{"class":"partOfSpeech",innerHTML:"["+
    a.basic.phonetic+"]"},b),a.audio&&("false"!=localStorage.sound&&dojo.publish("playDictAudio",[a.audio]),dojo.create("span",{"class":"mc_proimg",onclick:function(){dojo.publish("playDictAudio",[a.audio])}},b)),dojo.create("span",{"class":"add_word",onclick:function(){dojo.publish("addToBook",[a])}},b),dojo.create("span",{"class":"definition",innerHTML:"<p>"+a.basic.explains.join("\n").replace(/\n/g,"</p><p>")+"</p>"},c)):dojo.create("span",{innerHTML:"\u5355\u8bcd\u65e0\u6cd5\u8bc6\u522b","class":"dictTitle"},
    b):dojo.create("span",{innerHTML:"\u51fa\u9519\u4e86...","class":"dictTitle"},b);dojo.byId("loader").style.display="none";dojo.byId("wrapper").style.display=""},error:function(a){dojo.create("span",{innerHTML:"\u7f51\u7edc\u4e0d\u7ed9\u529b...","class":"dictTitle"},div);dojo.byId("loader").style.display="none";dojo.byId("wrapper").style.display=""}})});dojo.subscribe("playDictAudio",function(b){var a=dojo.byId("pronAudio");b?(a.src=b,a.load(),a.play()):a.src=""});
dojo.subscribe("addToBook",function(b){b={word:b.query,pron:b.basic.phonetic,definition:b.basic.explains.join("\n")};dojo.xhrPost({url:site+"/rest/vocabook/word/id",postData:dojo.toJson(b),headers:{"Content-Type":"application/json"},handleAs:"json",load:function(a){dojo.byId("loader").style.display="none";dojo.isObject(a)?showMsg("\u6dfb\u52a0\u6210\u529f"):0==a&&showMsg('\u8bf7\u5148<a href="'+site+'" target="_blank">\u767b\u5f55</a>\u80cc\u5355\u8bcd\u5e73\u53f0')},error:function(a){dojo.byId("loader").style.display=
    "none";a.responseText&&(a=JSON.parse(a.responseText),a.msg&&("\u627e\u4e0d\u5230\u751f\u8bcd\u672c"==a.msg?showMsg('\u672a\u5f00\u542f\u751f\u8bcd\u672c,<a href="http://wmbbs.sinaapp.com/forum.php?mod=viewthread&tid=308" target="_blank">\u5982\u4f55\u5f00\u542f</a>'):showMsg(a.msg)))}});dojo.byId("loader").style.display=""});function showMsg(b){dojo.byId("msg").innerHTML=b};